  <table class="table table-bordered">
    <tr>
        <th colspan="3" rowspan="2">シグナル</th>
        <th class="col-md-3" colspan="<%= @message.bytesize*8+2 %>">メッセージレイアウト(ビット)</th>
        <th rowspan="3">符号</th>
    </tr>
    <tr>
        <th  colspan="<%= @message.bytesize*8 %>">MSB</th>
        <th  rowspan="2">オフセット</th>
        <th  rowspan="2">サイズ</th>
    </tr>
    <tr>
        <th>シグナル名</th>
        <th>単位</th>
        <th>説明</th>
        <%= render 'label_bit_pattern', message: @message %>
    </tr>

    <tr>
      <%= message_form.fields_for :com_signals do |s| %>
        <td class="col-md-1"><%= s.text_field :name %></td>
        <td class="col-md-1"><%= s.text_field :unit %></td>
        <td class="col-md-2"><%= s.text_field :description %></td>
        <%= render 'val_bit_pattern', message: @message, com_signal: s %>
        <td class="col-md-1"><%= s.select :bit_offset, 0..(@message.bytesize*8-1), { :selected => s.object.bit_offset.to_i }, class: 'form-control'%></td>
        <td class="col-md-1"><%= s.select :bit_size,   1..(@message.bytesize*8),   { :selected => s.object.bit_size.to_i }, class: 'form-control'%></td>
        <td class="col-md-1">
          <%= s.select :sign_id,  @signs.map{|s| [s.name, s.id]}, { :selected => s.object.sign_id }, class: 'form-control'%>
        </td>
      <% end %>
    </tr>
</table>
